// Peity jQuery plugin
// (c) 2010 Ben Pickles
//
// http://benpickles.github.com/peity/
//
// Released under MIT license.
(function(e){e.fn.peity=function(c,b){return e(this).each(function(){e(this).change(function(){var a=e(this).html();e.fn.peity.graphers[c](e(this),e.extend({},e.fn.peity.defaults[c],b));e(this).trigger("chart:changed",a)}).trigger("change")})};e.fn.peity.graphers={};e.fn.peity.defaults={};e.fn.peity.add=function(c,b,a){e.fn.peity.graphers[c]=a;e.fn.peity.defaults[c]=b};e.fn.peity.add("pie",{colours:["#FFF4DD","#FF9900"],delimeter:"/",radius:16},function(c,b){var a=b.radius/2,d=document.createElement("canvas");
d.setAttribute("width",b.radius);d.setAttribute("height",b.radius);c.wrapInner("<span />").append(d);c=e("span",c).hide().text().split(b.delimeter);var h=parseFloat(c[0]),g=parseFloat(c[1]);c=-Math.PI/2;h=h/g*Math.PI*2;d=d.getContext("2d");d.beginPath();d.moveTo(a,a);d.arc(a,a,a,0,Math.PI*2,false);d.closePath();d.fillStyle=b.colours[0];d.fill();d.beginPath();d.moveTo(a,a);d.arc(a,a,a,c,h+c,false);d.closePath();d.fillStyle=b.colours[1];d.fill()});e.fn.peity.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",
delimeter:",",height:16,max:null,width:32},function(c,b){var a=document.createElement("canvas");a.setAttribute("width",b.width);a.setAttribute("height",b.height);c.wrapInner("<span />").append(a);c=e("span",c).hide().text().split(b.delimeter);var d=Math.max.apply(Math,c.slice(0).concat([b.max]));d=b.height/d;var h=b.width/(c.length-1),g=[],f=a.getContext("2d");f.beginPath();f.moveTo(0,b.height);for(a=0;a<c.length;a++){var i=a*h,j=b.height-d*c[a];g.push({x:i,y:j});f.lineTo(i,j)}f.lineTo(b.width,b.height);
f.fillStyle=b.colour;f.fill();f.beginPath();f.moveTo(0,g[0].y);for(a=0;a<g.length;a++)f.lineTo(g[a].x,g[a].y);f.strokeStyle=b.strokeColour;f.stroke()});e.fn.peity.add("bar",{colour:"#4D89F9",delimeter:",",height:16,max:null,width:32},function(c,b){var a=document.createElement("canvas");a.setAttribute("width",b.width);a.setAttribute("height",b.height);c.wrapInner("<span />").append(a);c=e("span",c).hide().text().split(b.delimeter);var d=Math.max.apply(Math,c.slice(0).concat([b.max]));d=b.height/d;
var h=b.width/c.length;a=a.getContext("2d");a.fillStyle=b.colour;for(var g=0;g<c.length;g++){var f=d*c[g];a.fillRect(g*h,b.height-f,h,f)}})})(jQuery);
