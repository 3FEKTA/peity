// Peity jQuery plugin
// (c) 2010 Ben Pickles
//
// http://benpickles.github.com/peity/
//
// Released under MIT license.
(function(e){e.fn.peity=function(b,c){return e(this).each(function(){e(this).change(function(){var a=e(this).html();e.fn.peity.graphers[b](e(this),e.extend({},e.fn.peity.defaults[b],c));e(this).trigger("chart:changed",a)}).trigger("change")})};e.fn.peity.graphers={};e.fn.peity.defaults={};e.fn.peity.add=function(b,c,a){e.fn.peity.graphers[b]=a;e.fn.peity.defaults[b]=c};e.fn.peity.add("pie",{colours:["#FFF4DD","#FF9900"],delimeter:"/",radius:16},function(b,c){var a=c.radius/2,d=document.createElement("canvas");
d.setAttribute("width",c.radius);d.setAttribute("height",c.radius);b.wrapInner("<span />").append(d);b=e("span",b).hide().text().split(c.delimeter);var h=parseFloat(b[0]),g=parseFloat(b[1]);b=-Math.PI/2;h=h/g*Math.PI*2;d=d.getContext("2d");d.beginPath();d.moveTo(a,a);d.arc(a,a,a,0,Math.PI*2,false);d.closePath();d.fillStyle=c.colours[0];d.fill();d.beginPath();d.moveTo(a,a);d.arc(a,a,a,b,h+b,false);d.closePath();d.fillStyle=c.colours[1];d.fill()});e.fn.peity.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",
delimeter:",",height:16,width:32},function(b,c){var a=document.createElement("canvas");a.setAttribute("width",c.width);a.setAttribute("height",c.height);b.wrapInner("<span />").append(a);b=e("span",b).hide().text().split(c.delimeter);var d=c.height/Math.max.apply(Math,b),h=c.width/(b.length-1),g=[],f=a.getContext("2d");f.beginPath();f.moveTo(0,c.height);for(a=0;a<b.length;a++){var i=a*h,j=c.height-d*b[a];g.push({x:i,y:j});f.lineTo(i,j)}f.lineTo(c.width,c.height);f.fillStyle=c.colour;f.fill();f.beginPath();
f.moveTo(0,g[0].y);for(a=0;a<g.length;a++)f.lineTo(g[a].x,g[a].y);f.strokeStyle=c.strokeColour;f.stroke()});e.fn.peity.add("bar",{colour:"#4D89F9",delimeter:",",height:16,width:32},function(b,c){var a=document.createElement("canvas");a.setAttribute("width",c.width);a.setAttribute("height",c.height);b.wrapInner("<span />").append(a);b=e("span",b).hide().text().split(c.delimeter);var d=c.height/Math.max.apply(Math,b),h=c.width/b.length;a=a.getContext("2d");a.fillStyle=c.colour;for(var g=0;g<b.length;g++){var f=
d*b[g];a.fillRect(g*h,c.height-f,h,f)}})})(jQuery);
